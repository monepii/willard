{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page_title }} - WILLARD</title>
    <link rel="stylesheet" href="{% static 'CSS/styles.css' %}">
    <link rel="stylesheet" href="{% static 'account/CSS/styles.css' %}">
    <link rel="stylesheet" href="{% static 'account/CSS/google-places.css' %}">
    <link rel="stylesheet" href="{% static 'CSS/styles_footer.css' %}">
    <link rel="stylesheet" href="{% static 'ferretetia/CSS/search.css' %}">
    <!-- Google Places API -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBbGLLKAQssx1lApjJMAiFQInmIpcSSedU&libraries=places&callback=initAutocomplete" async defer></script>
</head>
<body>
   {% include "ferretetia/auth.html" %}

    <!-- Header principal -->
    <header>
        <nav class="navbar">
            <div class="navbar-left">
                <div class="logo-container">
                    <a href="{% url 'ferretetia:index' %}">
                        <div class="logo-bg">WILLARD</div>
                    </a>
                </div>
            </div>
            <div class="navbar-center">
                <div class="search-container">
                    <input type="text" placeholder="Buscar Productos..." class="search-input">
                    <button class="search-btn">BUSCAR</button>
                </div>
            </div>
            <div class="navbar-right">
                <a href="{% url 'wishlist:wishlist' %}" class="nav-item">
                    <span class="icon">‚ô° WISHLIST</span>
                </a>
                <a href="{% url 'compare:compare' %}" class="nav-item">
                    <span class="icon">‚öñ COMPARAR</span>
                </a>
                <a href="{% url 'account:account' %}" class="nav-item active">
                    <span class="icon">üë§ MI CUENTA</span>
                </a>
                <a href="{% url 'checkout:checkout' %}" class="nav-item">
                    <span class="icon">üìã CHECKOUT</span>
                </a>
                <a href="{% url 'cart:cart' %}" class="nav-item cart">
                    <span class="icon">üõí CARRITO {% if cart_count > 0 %}({{ cart_count }}){% endif %}</span>
                </a>
            </div>
        </nav>
    </header>

    <!-- Contenido principal -->
    <main class="main-content">
        <div class="container">
            <div class="page-header">
                <h1>{{ page_title }}</h1>
                <a href="{% url 'account:direcciones' %}" class="btn btn-secondary">‚Üê Volver a Direcciones</a>
            </div>

            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}

            <div class="form-container">
                <form method="post" class="direccion-form">
                    {% csrf_token %}
    

                    <div class="form-row">
                        <div class="form-group form-group-wide">
                            <label for="{{ form.calle.id_for_label }}">{{ form.calle.label }}</label>
                            {{ form.calle }}
                            {% if form.calle.errors %}
                                <div class="error-message">{{ form.calle.errors.0 }}</div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.numero_exterior.id_for_label }}">{{ form.numero_exterior.label }}</label>
                            {{ form.numero_exterior }}
                            {% if form.numero_exterior.errors %}
                                <div class="error-message">{{ form.numero_exterior.errors.0 }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.numero_interior.id_for_label }}">{{ form.numero_interior.label }}</label>
                            {{ form.numero_interior }}
                            {% if form.numero_interior.errors %}
                                <div class="error-message">{{ form.numero_interior.errors.0 }}</div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.colonia.id_for_label }}">{{ form.colonia.label }}</label>
                            {{ form.colonia }}
                            {% if form.colonia.errors %}
                                <div class="error-message">{{ form.colonia.errors.0 }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.municipio.id_for_label }}">{{ form.municipio.label }}</label>
                            {{ form.municipio }}
                            {% if form.municipio.errors %}
                                <div class="error-message">{{ form.municipio.errors.0 }}</div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.estado.id_for_label }}">{{ form.estado.label }}</label>
                            {{ form.estado }}
                            {% if form.estado.errors %}
                                <div class="error-message">{{ form.estado.errors.0 }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.codigo_postal.id_for_label }}">{{ form.codigo_postal.label }}</label>
                            {{ form.codigo_postal }}
                            {% if form.codigo_postal.errors %}
                                <div class="error-message">{{ form.codigo_postal.errors.0 }}</div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.pais.id_for_label }}">{{ form.pais.label }}</label>
                            {{ form.pais }}
                            {% if form.pais.errors %}
                                <div class="error-message">{{ form.pais.errors.0 }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.telefono.id_for_label }}">{{ form.telefono.label }}</label>
                            {{ form.telefono }}
                            {% if form.telefono.errors %}
                                <div class="error-message">{{ form.telefono.errors.0 }}</div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group form-group-wide">
                            <label for="{{ form.instrucciones.id_for_label }}">{{ form.instrucciones.label }}</label>
                            {{ form.instrucciones }}
                            {% if form.instrucciones.errors %}
                                <div class="error-message">{{ form.instrucciones.errors.0 }}</div>
                            {% endif %}
                        </div>
                    </div>


                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Guardar Direcci√≥n</button>
                        <button type="button" class="btn btn-info" onclick="clearAddressForm()">Limpiar Direcci√≥n</button>
                        <a href="{% url 'account:direcciones' %}" class="btn btn-secondary">Cancelar</a>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        {% include "ferretetia/footer.html" %}
    </footer>

    <!-- Google Places Scripts -->
    <script src="{% static 'account/JS/google-places-config.js' %}"></script>
    <script src="{% static 'account/JS/google-places.js' %}"></script>
</body>
</html>
